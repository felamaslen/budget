/* eslint-disable max-len */
import React from 'react';
import { render } from '@testing-library/react';
import sinon from 'sinon';

import { GraphSpending, Props } from '.';

describe('<GraphSpending />', () => {
  let clock: sinon.SinonFakeTimers;
  beforeEach(() => {
    clock = sinon.useFakeTimers(new Date('2020-04-20T16:29Z'));
  });

  afterEach(() => {
    clock.restore();
  });

  const props: Props = {
    now: new Date('2020-04-20T16:29Z'),
    graphWidth: 500,
    valuesNet: [16000, 87322, -1055, -20665, 14402, 260454],
    valuesSpending: [15000, 14500, 20550, 60412, 1033, 10064],
    startDate: new Date('2019-11-30'),
  };

  it('should render a graph', async () => {
    expect.assertions(1);
    const { getByTestId } = render(<GraphSpending {...props} />);
    expect(getByTestId('graph-svg')).toMatchInlineSnapshot(`
      <svg
        data-testid="graph-svg"
        height="300"
        width="500"
      >
        <g>
          <g>
            <g>
              <line
                stroke="rgb(153,153,153)"
                stroke-width="1"
                x1="0"
                x2="500"
                y1="280.5"
                y2="280.5"
              />
              <line
                stroke="rgb(153,153,153)"
                stroke-width="1"
                x1="0"
                x2="500"
                y1="188.5"
                y2="188.5"
              />
              <line
                stroke="rgb(153,153,153)"
                stroke-width="1"
                x1="0"
                x2="500"
                y1="95.5"
                y2="95.5"
              />
            </g>
            <g>
              <line
                stroke="rgb(238,238,238)"
                stroke-width="1"
                x1="0"
                x2="500"
                y1="317.5"
                y2="317.5"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="1"
                x1="0"
                x2="500"
                y1="299.5"
                y2="299.5"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="1"
                x1="0"
                x2="500"
                y1="262.5"
                y2="262.5"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="1"
                x1="0"
                x2="500"
                y1="243.5"
                y2="243.5"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="1"
                x1="0"
                x2="500"
                y1="225.5"
                y2="225.5"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="1"
                x1="0"
                x2="500"
                y1="206.5"
                y2="206.5"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="1"
                x1="0"
                x2="500"
                y1="169.5"
                y2="169.5"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="1"
                x1="0"
                x2="500"
                y1="151.5"
                y2="151.5"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="1"
                x1="0"
                x2="500"
                y1="132.5"
                y2="132.5"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="1"
                x1="0"
                x2="500"
                y1="114.5"
                y2="114.5"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="1"
                x1="0"
                x2="500"
                y1="77.5"
                y2="77.5"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="1"
                x1="0"
                x2="500"
                y1="58.5"
                y2="58.5"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="1"
                x1="0"
                x2="500"
                y1="40.5"
                y2="40.5"
              />
            </g>
            <g>
              <text
                alignment-baseline="baseline"
                font-family="Arial, Helvetica, sans-serif"
                font-size="11"
                text-anchor="start"
                x="0"
                y="278.5"
              >
                £0
              </text>
              <text
                alignment-baseline="baseline"
                font-family="Arial, Helvetica, sans-serif"
                font-size="11"
                text-anchor="start"
                x="0"
                y="186.5"
              >
                £1k
              </text>
              <text
                alignment-baseline="baseline"
                font-family="Arial, Helvetica, sans-serif"
                font-size="11"
                text-anchor="start"
                x="0"
                y="93.5"
              >
                £2k
              </text>
            </g>
            <g>
              <line
                stroke="rgb(238,238,238)"
                stroke-width="0.5"
                x1="-19.5"
                x2="-19.5"
                y1="295"
                y2="0"
              />
              <line
                stroke="rgb(153,153,153)"
                stroke-width="0.5"
                x1="0.5"
                x2="0.5"
                y1="285"
                y2="0"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="0.5"
                x1="3.5"
                x2="3.5"
                y1="295"
                y2="0"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="0.5"
                x1="26.5"
                x2="26.5"
                y1="295"
                y2="0"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="0.5"
                x1="49.5"
                x2="49.5"
                y1="295"
                y2="0"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="0.5"
                x1="72.5"
                x2="72.5"
                y1="295"
                y2="0"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="0.5"
                x1="95.5"
                x2="95.5"
                y1="295"
                y2="0"
              />
              <line
                stroke="rgb(153,153,153)"
                stroke-width="0.5"
                x1="101.5"
                x2="101.5"
                y1="285"
                y2="0"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="0.5"
                x1="118.5"
                x2="118.5"
                y1="295"
                y2="0"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="0.5"
                x1="141.5"
                x2="141.5"
                y1="295"
                y2="0"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="0.5"
                x1="164.5"
                x2="164.5"
                y1="295"
                y2="0"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="0.5"
                x1="187.5"
                x2="187.5"
                y1="295"
                y2="0"
              />
              <line
                stroke="rgb(153,153,153)"
                stroke-width="0.5"
                x1="203.5"
                x2="203.5"
                y1="285"
                y2="0"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="0.5"
                x1="210.5"
                x2="210.5"
                y1="295"
                y2="0"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="0.5"
                x1="233.5"
                x2="233.5"
                y1="295"
                y2="0"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="0.5"
                x1="256.5"
                x2="256.5"
                y1="295"
                y2="0"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="0.5"
                x1="279.5"
                x2="279.5"
                y1="295"
                y2="0"
              />
              <line
                stroke="rgb(153,153,153)"
                stroke-width="0.5"
                x1="299.5"
                x2="299.5"
                y1="285"
                y2="0"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="0.5"
                x1="302.5"
                x2="302.5"
                y1="295"
                y2="0"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="0.5"
                x1="325.5"
                x2="325.5"
                y1="295"
                y2="0"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="0.5"
                x1="348.5"
                x2="348.5"
                y1="295"
                y2="0"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="0.5"
                x1="371.5"
                x2="371.5"
                y1="295"
                y2="0"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="0.5"
                x1="394.5"
                x2="394.5"
                y1="295"
                y2="0"
              />
              <line
                stroke="rgb(153,153,153)"
                stroke-width="0.5"
                x1="401.5"
                x2="401.5"
                y1="285"
                y2="0"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="0.5"
                x1="417.5"
                x2="417.5"
                y1="295"
                y2="0"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="0.5"
                x1="440.5"
                x2="440.5"
                y1="295"
                y2="0"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="0.5"
                x1="463.5"
                x2="463.5"
                y1="295"
                y2="0"
              />
              <line
                stroke="rgb(238,238,238)"
                stroke-width="0.5"
                x1="486.5"
                x2="486.5"
                y1="295"
                y2="0"
              />
              <line
                stroke="rgb(153,153,153)"
                stroke-width="0.5"
                x1="500.5"
                x2="500.5"
                y1="285"
                y2="0"
              />
            </g>
            <g>
              <line
                stroke="rgb(0,0,0)"
                stroke-width="1"
                x1="-19.5"
                x2="-19.5"
                y1="300"
                y2="295"
              />
              <line
                stroke="rgb(51,51,51)"
                stroke-width="1"
                x1="0.5"
                x2="0.5"
                y1="300"
                y2="285"
              />
              <line
                stroke="rgb(0,0,0)"
                stroke-width="1"
                x1="3.5"
                x2="3.5"
                y1="300"
                y2="295"
              />
              <line
                stroke="rgb(0,0,0)"
                stroke-width="1"
                x1="26.5"
                x2="26.5"
                y1="300"
                y2="295"
              />
              <line
                stroke="rgb(0,0,0)"
                stroke-width="1"
                x1="49.5"
                x2="49.5"
                y1="300"
                y2="295"
              />
              <line
                stroke="rgb(0,0,0)"
                stroke-width="1"
                x1="72.5"
                x2="72.5"
                y1="300"
                y2="295"
              />
              <line
                stroke="rgb(0,0,0)"
                stroke-width="1"
                x1="95.5"
                x2="95.5"
                y1="300"
                y2="295"
              />
              <line
                stroke="rgb(51,51,51)"
                stroke-width="1"
                x1="101.5"
                x2="101.5"
                y1="300"
                y2="285"
              />
              <line
                stroke="rgb(0,0,0)"
                stroke-width="1"
                x1="118.5"
                x2="118.5"
                y1="300"
                y2="295"
              />
              <line
                stroke="rgb(0,0,0)"
                stroke-width="1"
                x1="141.5"
                x2="141.5"
                y1="300"
                y2="295"
              />
              <line
                stroke="rgb(0,0,0)"
                stroke-width="1"
                x1="164.5"
                x2="164.5"
                y1="300"
                y2="295"
              />
              <line
                stroke="rgb(0,0,0)"
                stroke-width="1"
                x1="187.5"
                x2="187.5"
                y1="300"
                y2="295"
              />
              <line
                stroke="rgb(51,51,51)"
                stroke-width="1"
                x1="203.5"
                x2="203.5"
                y1="300"
                y2="285"
              />
              <line
                stroke="rgb(0,0,0)"
                stroke-width="1"
                x1="210.5"
                x2="210.5"
                y1="300"
                y2="295"
              />
              <line
                stroke="rgb(0,0,0)"
                stroke-width="1"
                x1="233.5"
                x2="233.5"
                y1="300"
                y2="295"
              />
              <line
                stroke="rgb(0,0,0)"
                stroke-width="1"
                x1="256.5"
                x2="256.5"
                y1="300"
                y2="295"
              />
              <line
                stroke="rgb(0,0,0)"
                stroke-width="1"
                x1="279.5"
                x2="279.5"
                y1="300"
                y2="295"
              />
              <line
                stroke="rgb(51,51,51)"
                stroke-width="1"
                x1="299.5"
                x2="299.5"
                y1="300"
                y2="285"
              />
              <line
                stroke="rgb(0,0,0)"
                stroke-width="1"
                x1="302.5"
                x2="302.5"
                y1="300"
                y2="295"
              />
              <line
                stroke="rgb(0,0,0)"
                stroke-width="1"
                x1="325.5"
                x2="325.5"
                y1="300"
                y2="295"
              />
              <line
                stroke="rgb(0,0,0)"
                stroke-width="1"
                x1="348.5"
                x2="348.5"
                y1="300"
                y2="295"
              />
              <line
                stroke="rgb(0,0,0)"
                stroke-width="1"
                x1="371.5"
                x2="371.5"
                y1="300"
                y2="295"
              />
              <line
                stroke="rgb(0,0,0)"
                stroke-width="1"
                x1="394.5"
                x2="394.5"
                y1="300"
                y2="295"
              />
              <line
                stroke="rgb(51,51,51)"
                stroke-width="1"
                x1="401.5"
                x2="401.5"
                y1="300"
                y2="285"
              />
              <line
                stroke="rgb(0,0,0)"
                stroke-width="1"
                x1="417.5"
                x2="417.5"
                y1="300"
                y2="295"
              />
              <line
                stroke="rgb(0,0,0)"
                stroke-width="1"
                x1="440.5"
                x2="440.5"
                y1="300"
                y2="295"
              />
              <line
                stroke="rgb(0,0,0)"
                stroke-width="1"
                x1="463.5"
                x2="463.5"
                y1="300"
                y2="295"
              />
              <line
                stroke="rgb(0,0,0)"
                stroke-width="1"
                x1="486.5"
                x2="486.5"
                y1="300"
                y2="295"
              />
              <line
                stroke="rgb(51,51,51)"
                stroke-width="1"
                x1="500.5"
                x2="500.5"
                y1="300"
                y2="285"
              />
            </g>
            <g>
              <text
                alignment-baseline="baseline"
                font-family="Arial, Helvetica, sans-serif"
                font-size="11"
                transform="rotate(-30 0.5 285)"
                x="0.5"
                y="285"
              >
                Dec
              </text>
              <text
                alignment-baseline="baseline"
                font-family="Arial, Helvetica, sans-serif"
                font-size="11"
                transform="rotate(-30 101.5 285)"
                x="101.5"
                y="285"
              >
                Jan
              </text>
              <text
                alignment-baseline="baseline"
                font-family="Arial, Helvetica, sans-serif"
                font-size="11"
                transform="rotate(-30 203.5 285)"
                x="203.5"
                y="285"
              >
                Feb
              </text>
              <text
                alignment-baseline="baseline"
                font-family="Arial, Helvetica, sans-serif"
                font-size="11"
                transform="rotate(-30 299.5 285)"
                x="299.5"
                y="285"
              >
                Mar
              </text>
              <text
                alignment-baseline="baseline"
                font-family="Arial, Helvetica, sans-serif"
                font-size="11"
                transform="rotate(-30 401.5 285)"
                x="401.5"
                y="285"
              >
                Apr
              </text>
              <text
                alignment-baseline="baseline"
                font-family="Arial, Helvetica, sans-serif"
                font-size="11"
                transform="rotate(-30 500.5 285)"
                x="500.5"
                y="285"
              >
                May
              </text>
            </g>
          </g>
          <g>
            <line
              stroke="rgb(51,51,51)"
              stroke-width="1"
              x1="466.5"
              x2="466.5"
              y1="300"
              y2="40"
            />
            <text
              color="rgb(0,0,0)"
              font-family="Arial, Helvetica, sans-serif"
              font-size="11"
              x="466.5"
              y="40"
            >
              Now
            </text>
          </g>
        </g>
        <g>
          <g>
            <path
              d="M0,280.88745335605205 L6.964645005288263e-16,269.51332489691214  L-3.3,271.1 L0.0,266.3 L3.3,271.1 L0.0,269.5"
              fill="rgb(0,204,51)"
              stroke="rgb(0,204,51)"
              stroke-width="0.18429357967241816"
            />
          </g>
          <g>
            <path
              d="M101.97368421052632,280.88745335605205 L101.97368421052632,205.4388505242385  L97.5,207.6 L102.0,201.0 L106.5,207.6 L102.0,205.4"
              fill="rgb(0,204,51)"
              stroke="rgb(0,204,51)"
              stroke-width="1.005805247759681"
            />
          </g>
          <g>
            <path
              d="M203.94736842105263,280.88745335605205 L203.94736842105263,278.5109344453027  L207.2,276.9 L203.9,281.7 L200.7,276.9 L203.9,278.5"
              fill="rgb(204,51,0)"
              stroke="rgb(204,51,0)"
              stroke-width="0.15315751270263733"
            />
          </g>
          <g>
            <path
              d="M299.3421052631579,280.88745335605205 L299.3421052631579,290.1  L306.8,286.5 L299.3,297.3 L291.8,286.5 L299.3,290.1"
              fill="rgb(204,51,0)"
              stroke="rgb(204,51,0)"
              stroke-width="3"
            />
          </g>
          <g>
            <path
              d="M401.3157894736842,280.88745335605205 L401.3157894736842,270.94894097676877  L398.1,272.6 L401.3,267.7 L404.6,272.6 L401.3,270.9"
              fill="rgb(0,204,51)"
              stroke="rgb(0,204,51)"
              stroke-width="0.1658872584026354"
            />
          </g>
          <g>
            <path
              d="M500,280.88745335605205 L500,49.900000000000006  L492.5,53.5 L500.0,42.7 L507.5,53.5 L500.0,49.9"
              fill="rgb(0,204,51)"
              stroke="rgb(0,204,51)"
              stroke-width="3"
            />
          </g>
        </g>
        <g>
          <path
            d="M0.0,267.0 Q66,268 102.0,267.5 C138,267 169,269 203.9,261.9 C239,254 267,222 299.3,225.0 C336,228 363,271 401.3,279.9 Q434,287 500.0,271.6"
            fill="none"
            stroke="rgb(0,51,153)"
            stroke-width="2"
          />
          <path
            d="M0.0,267.0 Q66,268 102.0,267.2 C138,267 168,268 203.9,265.5 C237,263 266,256 299.3,255.3 C335,254 366,259 401.3,260.3 Q436,261 500.0,262.1"
            fill="none"
            stroke="rgb(153,153,153)"
            stroke-dasharray="3,5"
            stroke-width="1"
          />
        </g>
        <g>
          <g>
            <rect
              fill="rgba(255,255,255,0.5)"
              height="60"
              width="200"
              x="45"
              y="8"
            />
            <text
              alignment-baseline="hanging"
              color="rgb(0,0,0)"
              font-family="Arial, Helvetica, sans-serif"
              font-size="16"
              x="65"
              y="10"
            >
              Cash flow
            </text>
            <line
              stroke="rgb(0,51,153)"
              stroke-width="2"
              x1="50"
              x2="74"
              y1="40"
              y2="40"
            />
            <text
              alignment-baseline="middle"
              fill="rgb(51,51,51)"
              font-family="Arial, Helvetica, sans-serif"
              font-size="11"
              x="78"
              y="40"
            >
              Spending
            </text>
            <rect
              fill="rgba(255,255,255,0.5)"
              height="260"
              width="33.924943652534125"
              x="466.0750563474659"
              y="40"
            />
          </g>
        </g>
      </svg>
    `);
  });
});
